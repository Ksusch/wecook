(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t){},166:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(23),l=a.n(i),s=(a(24),a(183)),c=a(4),o=a(5),u=a(7),m=a(6),p=a(8),h=a(3),d=a(185),v=a(72),f=a(182),g=a(42),E=a.n(g),b="https://wepetevents.herokuapp.com",y=function(){function e(){Object(c.a)(this,e),this.service=E.a.create({baseURL:b+"/api",withCredentials:!0})}return Object(o.a)(e,[{key:"updateUser",value:function(e){return this.service.put("/user",e)}},{key:"getPets",value:function(){return this.service.get("/pets").then(function(e){return e.data})}},{key:"createPet",value:function(e){return this.service.post("/pets",e)}},{key:"updatePet",value:function(e,t){return this.service.put("/pets/".concat(e),t)}},{key:"deletePet",value:function(e){return this.service.delete("/pets/".concat(e))}},{key:"getEvents",value:function(){return this.service.get("/events").then(function(e){return e.data})}},{key:"createEvent",value:function(e){return this.service.post("/events",e)}},{key:"updateEvent",value:function(e,t){return this.service.put("/events/".concat(e),t)}},{key:"deleteEvent",value:function(e){return this.service.delete("/events/".concat(e))}},{key:"getParticipants",value:function(e){return this.service.get("/participants/".concat(e)).then(function(e){return e.data})}},{key:"addParticipant",value:function(e){return this.service.post("/participants",{id:e})}},{key:"removeParticipant",value:function(e){return this.service.delete("/participants",{id:e})}},{key:"addImageUrl",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.service.post("/image",{imageUrl:e,model:t,owner:a})}}]),e}(),k=function(){function e(){Object(c.a)(this,e),this.service=E.a.create({baseURL:b+"/auth",withCredentials:!0})}return Object(o.a)(e,[{key:"login",value:function(e){return this.service.post("/login",e)}},{key:"signup",value:function(e){return this.service.post("/signup",e)}},{key:"logout",value:function(){return this.service.get("/logout")}},{key:"verify",value:function(){return this.service.get("/verifyAuthentication")}},{key:"confirmEmail",value:function(e){return this.service.post("/confirm",{token:e})}}]),e}(),O=function(){function e(){Object(c.a)(this,e)}return Object(o.a)(e,[{key:"set",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},{key:"get",value:function(e){return JSON.parse(localStorage.getItem(e))}},{key:"remove",value:function(e){localStorage.removeItem(e)}}]),e}(),j=a(167),N=a(168),S=a(169),w=a(170),C=a(171),x=a(172),P=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 d-flex align-items-center flex-column home-text "},r.a.createElement("h1",null,"Welcome to WePet"),r.a.createElement("p",null,"Running out of old tricks to entertain your pet at home? Looking for cute animals to play with?",r.a.createElement("br",null),"We have found a solution for you!"),r.a.createElement("br",null),this.props.user?r.a.createElement("div",null):r.a.createElement(j.a,{className:"btn-secondary",onClick:function(){return e.props.history.push("/loginsignup")}},"Login/Signup")),r.a.createElement("div",{className:"col-12 align-self-center profile-img"},r.a.createElement("img",{className:"d-flex justify-content-center flex-end img-fluid ",src:"images/national-pet-day.jpg",alt:"landing-page-pic"}))),r.a.createElement("hr",{className:"bighr"}),r.a.createElement("div",{className:"row profile-row"},r.a.createElement("div",{className:"col-4"},r.a.createElement(N.a,null,r.a.createElement(S.a,{top:!0,width:"100%",src:"https://placeholdit.imgix.net/~text?txtsize=33&txt=318%C3%97180&w=318&h=180",alt:"Card image cap"}),r.a.createElement(w.a,null,r.a.createElement(C.a,null,"Share your Pet"),r.a.createElement(x.a,null,"Some quick example text to build on the card title and make up the bulk of the card's content."),r.a.createElement(j.a,null,"Button")))),r.a.createElement("div",{className:"col-4"}," ",r.a.createElement(N.a,null,r.a.createElement(S.a,{top:!0,width:"100%",src:"https://placeholdit.imgix.net/~text?txtsize=33&txt=318%C3%97180&w=318&h=180",alt:"Card image cap"}),r.a.createElement(w.a,null,r.a.createElement(C.a,null,"Create an Event"),r.a.createElement(x.a,null,"Some quick example text to build on the card title and make up the bulk of the card's content."),r.a.createElement(j.a,null,"Button")))),r.a.createElement("div",{className:"col-4"},"",r.a.createElement(N.a,null,r.a.createElement(S.a,{top:!0,width:"100%",src:"https://placeholdit.imgix.net/~text?txtsize=33&txt=318%C3%97180&w=318&h=180",alt:"Card image cap"}),r.a.createElement(w.a,null,r.a.createElement(C.a,null,"Make New Pet Friends"),r.a.createElement(x.a,null,"Some quick example text to build on the card title and make up the bulk of the card's content."),r.a.createElement(j.a,null,"Button")))," ")),r.a.createElement("hr",{className:"bighr"})))}}]),t}(n.Component),T=a(177),A=a(71),U=a.n(A),D=["google","facebook","twitter"],M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={socket:!1},a.socket=U()(b),a.checkSocket=a.checkSocket.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"checkSocket",value:function(){var e,t=this;void 0===this.socket.id&&(e=setInterval(function(){void 0!==t.socket.id&&(t.setState({socket:!0}),clearInterval(e))},500))}},{key:"componentDidMount",value:function(){this.checkSocket()}},{key:"render",value:function(){var e=this;return this.state.socket?r.a.createElement(r.a.Fragment,null,D.map(function(t){return r.a.createElement(L,{provider:t,key:t,socket:e.socket,handler:function(t){return e.props.handler(t)}})})):r.a.createElement("div",null)}}]),t}(n.Component),L=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={disabled:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on(this.props.provider,function(t){e.popup.close(),e.props.handler(t)})}},{key:"checkPopup",value:function(){var e=this,t=setInterval(function(){var a=e.popup;a&&!a.closed&&void 0!==a.closed||(clearInterval(t),e.setState({disabled:""}))},1e3)}},{key:"openPopup",value:function(){var e=window.innerWidth/2-300,t=window.innerHeight/2-300,a="".concat(b,"/auth/").concat(this.props.provider,"?socketId=").concat(this.props.socket.id);return window.open(a,"","toolbar=no, location=no, directories=no, status=no, menubar=no, \n            scrollbars=no, resizable=no, copyhistory=no, width=".concat(600,", \n            height=").concat(600,", top=").concat(t,", left=").concat(e))}},{key:"startAuth",value:function(e){this.state.disabled||(e.preventDefault(),this.popup=this.openPopup(),this.checkPopup(),this.setState({disabled:"disabled"}))}},{key:"closeCard",value:function(){this.setState({user:{}})}},{key:"render",value:function(){var e;e="google"===this.props.provider?"fab fa-google fa-3x":"twitter"===this.props.provider?"fab fa-twitter fa-3x":"fab fa-facebook-f fa-3x";var t=this.props.provider[0].toUpperCase()+this.props.provider.substr(1);return r.a.createElement("div",null,r.a.createElement(j.a,{onClick:this.startAuth.bind(this),className:"btn btn-primary connection-icon"},r.a.createElement("i",{className:"".concat(e)}),t))}}]),t}(n.Component),I=M,R=a(14),W=a(173),_=a(174),J=a(175),B=a(186),z=a(176),F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={email:null,password:null},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.handler(this.state)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-wrapper"},r.a.createElement(W.a,{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(_.a,null,r.a.createElement(J.a,null,r.a.createElement(B.a,{addonType:"prepend"},r.a.createElement("div",{className:"prepend-box"},r.a.createElement("i",{className:"fas fa-envelope fa-2x"}))),r.a.createElement(z.a,{type:"email",name:"email",placeholder:"JonSnow@winterfell.net",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement(_.a,null,r.a.createElement(J.a,null,r.a.createElement(B.a,{addonType:"prepend"},r.a.createElement("div",{className:"prepend-box"},r.a.createElement("i",{className:"fas fa-unlock fa-2x"}))),r.a.createElement(z.a,{type:"password",name:"password",placeholder:"Your password",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement(_.a,{className:"d-flex justify-content-between"},r.a.createElement(j.a,{className:"btn btn-primary",onClick:function(t){return e.props.handleToggle(t)}},r.a.createElement("i",{className:"fas fa-arrow-left"})," Back"),r.a.createElement(j.a,{className:"btn btn-primary",onClick:function(t){return e.props.toggleSignup(t)}},r.a.createElement("i",{className:"fas fa-user-plus fa-1x"})," Signup"),r.a.createElement(j.a,{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-sign-in-alt fa-1x"})," Login"))))}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={name:null,email:null,password:null,passwordConfirm:null},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.name&&this.state.name.length>2&&this.state.password&&this.state.password===this.state.passwordConfirm&&this.state.password.length>5&&this.state.email&&this.state.email.length>5&&this.state.email.includes("@")?this.props.handler(this.state):this.setState({name:null,email:null,password:null,passwordConfirm:null})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-wrapper"},r.a.createElement(W.a,{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(_.a,null,r.a.createElement(J.a,null,r.a.createElement(B.a,{addonType:"prepend"},r.a.createElement("div",{className:"prepend-box"},r.a.createElement("i",{className:"fas fa-pen fa-2x"}))),r.a.createElement(z.a,{type:"text",name:"name",placeholder:"Jon Snow",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement(_.a,null,r.a.createElement(J.a,null,r.a.createElement(B.a,{addonType:"prepend"},r.a.createElement("div",{className:"prepend-box"},r.a.createElement("i",{className:"fas fa-envelope fa-2x"}))),r.a.createElement(z.a,{type:"email",name:"email",placeholder:"JonSnow@winterfell.net",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement(_.a,null),r.a.createElement(_.a,{className:"d-flex justify-content-center"},r.a.createElement(J.a,null,r.a.createElement(B.a,{addonType:"prepend"},r.a.createElement("div",{className:"prepend-box"},r.a.createElement("i",{className:"fas fa-unlock fa-2x"}))),r.a.createElement(z.a,{type:"password",name:"password",placeholder:"Password",onChange:function(t){return e.handleChange(t)}})),r.a.createElement(J.a,null,r.a.createElement(z.a,{type:"password",name:"passwordConfirm",placeholder:"Confirm",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement(_.a,{className:"d-flex justify-content-between"},r.a.createElement(j.a,{className:"btn btn-primary",onClick:function(t){return e.props.handleToggle(t)}},r.a.createElement("i",{className:"fas fa-arrow-left"})," Back"),r.a.createElement(j.a,{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-user-plus fa-1x"})," Signup"))))}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={login:!1,signup:!1,confirm:!1},a.AuthService=new k,a.toggleLogin=a.toggleLogin.bind(Object(h.a)(Object(h.a)(a))),a.toggleSignup=a.toggleSignup.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"toggleLogin",value:function(e){e&&this.setState(function(e){return{login:!e.login}})}},{key:"toggleSignup",value:function(e){e&&this.setState(function(e){return{signup:!e.signup}})}},{key:"handleLogin",value:function(e){var t=this;this.AuthService.login(e).then(function(e){t.props.handler(e)}).catch(function(e){return console.error(e)})}},{key:"handleSignup",value:function(e){var t=this;this.AuthService.signup(e).then(function(e){e.status&&200===e.status&&t.setState({confirm:!0,login:!1,signup:!1})}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement(T.a,null,r.a.createElement("div",null,this.state.confirm?r.a.createElement("div",null,"A confirmation has been sent to your email. Please check your inbox and follow the link provided in the confirmation email."):this.state.signup?r.a.createElement("div",null,r.a.createElement(q,{handler:function(t){return e.handleSignup(t)},handleToggle:function(t){return e.toggleSignup(t)}})):this.state.login?r.a.createElement(F,{handler:function(t){return e.handleLogin(t)},handleToggle:function(t){return e.toggleLogin(t)},toggleSignup:function(t){return e.toggleSignup(t)}}):r.a.createElement("div",{className:"d-flex flex-column justify-content-center loginsignup-main"},r.a.createElement("h5",{className:"automargin",id:"proceed-with"},"Proceed with"),r.a.createElement("div",{className:"automargin d-flex justify-content-between flex-wrap loginsignup-wrapper"},r.a.createElement(I,{handler:function(t){return e.props.handler(t)}}),r.a.createElement("div",null,r.a.createElement(j.a,{className:"connection-icon btn btn-primary",name:"login",onClick:function(t){return e.toggleLogin(t)}},r.a.createElement("i",{className:"far fa-envelope fa-3x"}),"Email"))))))}}]),t}(n.Component),H=a(181),Y=a(178),Z=a(179),Q=a(180),X=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"uploadWidget",value:function(){window.cloudinary.openUploadWidget({cloud_name:"dgxu6dbuw",upload_preset:[this.props.imageType]},function(e,t){e?console.error(e):"success"===t.event&&this.props.handler(t.info.url)}.bind(this))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:this.props.class||"",onClick:this.uploadWidget.bind(this)},r.a.createElement("i",{className:"fas fa-camera"})))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={modal:!1,image:"",name:"",animal:"",description:""},a.toggle=a.toggle.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.pet&&this.setState({image:this.props.pet.image,name:this.props.pet.name,description:this.props.pet.description,animal:this.props.pet.animal})}},{key:"toggle",value:function(){this.props.toggleModal()}},{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.state.name&&this.state.name.length>0&&this.state.animal&&this.state.animal.length>0&&this.state.description&&this.state.description.length>0&&(this.state.name!=this.props.pet.name||this.state.description!=this.props.pet.description||this.state.animal!=this.props.pet.animal||this.state.image!=this.props.pet.image)){var t={name:this.state.name,animal:this.state.animal,description:this.state.description,image:this.state.image};this.props.handler(t),this.toggle()}}},{key:"handleImage",value:function(e){this.setState({image:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(H.a,{isOpen:this.props.modalOpen,toggle:this.toggle},r.a.createElement(W.a,{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(Y.a,{toggle:this.toggle},"Add a Pet"),r.a.createElement(Z.a,null,r.a.createElement(X,{handler:function(t){return e.handleImage(t)},imageType:"petPic"}),r.a.createElement("div",{className:"modal-camera-padding"}),r.a.createElement(_.a,null,r.a.createElement(z.a,{placeholder:void 0===this.props.pet.name?"Pet name":this.props.pet.name,value:this.state.name,name:"name",onChange:function(t){return e.handleChange(t)}})),r.a.createElement(_.a,null,r.a.createElement(z.a,{placeholder:void 0===this.props.pet.animal?"Animal":this.props.pet.animal,value:this.state.animal,name:"animal",onChange:function(t){return e.handleChange(t)}})),r.a.createElement(_.a,null,r.a.createElement(z.a,{type:"textarea",name:"description",placeholder:void 0===this.props.pet.description?"Description":this.props.pet.description,value:this.state.description,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement(Q.a,null,r.a.createElement(_.a,null,r.a.createElement(j.a,{className:"btn btn-primary",type:"submit"},r.a.createElement("i",{className:"fas fa-save"})))))))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a.modalToggle=a.modalToggle.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"modalToggle",value:function(){this.setState(function(e){return{modalOpen:!e.modalOpen}})}},{key:"deletePet",value:function(){this.props.deletePet(this.props.pet._id)}},{key:"updatePet",value:function(e){this.props.updatePet(this.props.pet._id,e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"flex-test event-card"},r.a.createElement("div",{className:"event-card-top d-flex justify-content-between"},r.a.createElement("h3",null," ",this.props.pet.name||"")),r.a.createElement("div",null,r.a.createElement("div",{className:"event-image-wrapper d-flex"},void 0===this.props.pet.image?r.a.createElement("i",{className:"fas fa-camera fa-5x"}):r.a.createElement("img",{src:this.props.pet.image,alt:"this pet"}))),r.a.createElement("div",{className:"event-card-location"},this.props.pet.animal||""," \xa0",r.a.createElement("i",{className:"fas fa-".concat(this.props.pet.animal.toLowerCase())})),r.a.createElement("div",{className:"event-description"},this.props.pet.description||""),r.a.createElement("div",{className:"d-flex justify-content-even pet-card-button-wrapper"},r.a.createElement(j.a,{className:"card-button event-delete-button",onClick:this.deletePet.bind(this)},r.a.createElement("i",{className:"far fa-trash-alt small-btn "})),r.a.createElement(j.a,{className:"card-button event-edit-button",onClick:this.modalToggle},r.a.createElement("i",{className:"fas fa-pen small-btn "}))),r.a.createElement(V,{modalOpen:this.state.modalOpen,toggleModal:this.modalToggle,handler:function(t){return e.updatePet(t)},pet:this.props.pet}))}}]),t}(n.Component),K=a(133)({accessToken:"pk.eyJ1IjoibWMxMDBzIiwiYSI6ImNqb2E2ZTF3ODBxa3czd2xldHp1Z2FxbGYifQ.U4oatm5RsTXXHQLz5w66dQ"}),ee=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={modal:!1,name:"",description:"",location:"",image:"",searchResults:[]},a.toggle=a.toggle.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){void 0!=this.props.event&&(console.log("event modal",this.props.event),this.setState({image:this.props.event.image,name:this.props.event.name,description:this.props.event.description,location:this.props.event.location}))}},{key:"toggle",value:function(){this.props.toggleModal()}},{key:"handleChange",value:function(e){var t=this;this.setState(Object(R.a)({},e.target.name,e.target.value)),"location"===e.target.name&&K.forwardGeocode({query:e.target.value}).send().then(function(e){t.setState({searchResults:e.body.features})})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.state.name&&this.state.name.length>0&&this.state.location.address&&this.state.location.address.length>0&&this.state.location.coordinates&&this.state.location.coordinates.length>0&&this.state.description&&this.state.description.length>0){var t={name:this.state.name,location:this.state.location,description:this.state.description,image:this.state.image};this.props.handler(t),this.toggle()}}},{key:"handleImage",value:function(e){this.setState({image:e})}},{key:"handleSearchResultClick",value:function(e){this.setState({location:{address:e.place_name,coordinates:e.center},searchResults:[]})}},{key:"render",value:function(){var e=this;return this.props.event?r.a.createElement("div",null,r.a.createElement(H.a,{isOpen:this.props.modalOpen,toggle:this.toggle},r.a.createElement(W.a,{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(Y.a,{toggle:this.toggle},"Add an Event"),r.a.createElement(Z.a,null,r.a.createElement(X,{handler:function(t){return e.handleImage(t)},imageType:"eventPic"}),r.a.createElement("div",{className:"modal-camera-padding"}),r.a.createElement(_.a,null,r.a.createElement(z.a,{placeholder:void 0===this.props.event.name?"Event name":this.props.event.name,value:this.state.name,name:"name",onChange:function(t){return e.handleChange(t)}})),r.a.createElement(_.a,null,r.a.createElement(z.a,{placeholder:"Location",value:this.state.location&&this.state.location.address,name:"location",onChange:function(t){return e.handleChange(t)}}),this.state.searchResults.map(function(t){return r.a.createElement("div",{onClick:function(){return e.handleSearchResultClick(t)}},t.place_name,r.a.createElement("hr",null))})),r.a.createElement(_.a,null,r.a.createElement(z.a,{type:"textarea",name:"description",placeholder:void 0===this.props.event.description?"Description":this.props.event.description,value:this.state.description,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement(Q.a,null,r.a.createElement(_.a,null,r.a.createElement(j.a,{className:"btn btn-primary",type:"submit"},r.a.createElement("i",{className:"fas fa-save"}))))))):r.a.createElement("div",null,"Loading")}}]),t}(n.Component),te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a.modalToggle=a.modalToggle.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"modalToggle",value:function(){this.setState(function(e){return{modalOpen:!e.modalOpen}})}},{key:"deleteEvent",value:function(){this.props.deleteEvent(this.props.event._id)}},{key:"updateEvent",value:function(e){this.props.updateEvent(this.props.event._id,e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"event-card d-flex flex-nowrap flex-column"},r.a.createElement("div",{className:"event-card-top d-flex justify-content-between"},r.a.createElement("h3",null,this.props.event.name)),r.a.createElement("div",null,r.a.createElement("div",{className:"event-image-wrapper d-flex"},void 0===this.props.event.image?r.a.createElement("i",{className:"fas fa-camera fa-5x"}):r.a.createElement("img",{src:this.props.event.image,alt:"this event"}))),r.a.createElement("div",{className:"event-card-location"},r.a.createElement("i",{className:"fas fa-map-marker"}),this.props.event.location.address||""),r.a.createElement("hr",null),r.a.createElement("div",{className:"event-description"},this.props.event.description||""),r.a.createElement("div",{className:"d-flex justify-content-even pet-card-button-wrapper"},r.a.createElement(j.a,{className:"card-button event-delete-button",onClick:this.deleteEvent.bind(this)},r.a.createElement("i",{className:"far fa-trash-alt"})),r.a.createElement(j.a,{className:"card-button event-edit-button",onClick:this.modalToggle},r.a.createElement("i",{className:"fas fa-pen small-btn"}))),r.a.createElement(ee,{modalOpen:this.state.modalOpen,toggleModal:this.modalToggle,handler:function(t){return e.updateEvent(t)},event:this.props.event}))}}]),t}(n.Component),ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={image:null,name:null,animal:null,description:null},a.modalToggle=a.modalToggle.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"modalToggle",value:function(){this.setState(function(e){return{modalOpen:!e.modalOpen}})}},{key:"addPet",value:function(e){this.props.handler(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(j.a,{className:"btn btn-primary",onClick:this.modalToggle},r.a.createElement(V,{modalOpen:this.state.modalOpen,toggleModal:this.modalToggle,handler:function(t){return e.addPet(t)},pet:{image:void 0,name:void 0,description:void 0}}),r.a.createElement("i",{className:"fas fa-plus"}))}}]),t}(n.Component),ne=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a.modalToggle=a.modalToggle.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"modalToggle",value:function(){this.setState(function(e){return{modalOpen:!e.modalOpen}})}},{key:"addEvent",value:function(e){console.log("fired on add event"),this.props.handler(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(j.a,{className:"btn btn-primary",onClick:this.modalToggle},r.a.createElement("i",{className:"fas fa-plus"}),r.a.createElement(ee,{modalOpen:this.state.modalOpen,toggleModal:this.modalToggle,handler:function(t){return e.addEvent(t)},event:{name:void 0,description:void 0,location:void 0,image:void 0}}))}}]),t}(n.Component),re=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={image:"",name:"",about:""},a.toggle=a.toggle.bind(Object(h.a)(Object(h.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.modalOpen!==this.props.modalOpen&&this.setState({image:this.props.user.image,name:this.props.user.name,about:this.props.user.about})}},{key:"toggle",value:function(){this.props.toggleModal()}},{key:"handleChange",value:function(e){console.log("in handleChange",e.target),this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.state.name&&this.state.name.length>0&&this.state.about&&this.state.about.length>0&&(this.props.user.name!==this.state.name||this.props.user.about!==this.state.about||this.props.user.image!==this.state.image)){var t={};this.state.name&&(t.name=this.state.name),this.state.about&&(t.about=this.state.about),this.state.image&&(t.image=this.state.image),this.props.handler(t),this.toggle()}else this.toggle()}},{key:"handleImage",value:function(e){console.log("hello from updaterender"),this.setState({image:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(H.a,{isOpen:this.props.modalOpen,toggle:this.toggle},r.a.createElement(W.a,{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(Y.a,{toggle:this.toggle},"Update your info!"),r.a.createElement(Z.a,null,r.a.createElement(X,{handler:function(t){return e.handleImage(t)},imageType:"profilePic"})," ",r.a.createElement("div",{className:"modal-camera-padding"}),r.a.createElement(_.a,null,r.a.createElement(z.a,{type:"text",name:"name",placeholder:void 0===this.props.user.name?"Name":this.props.user.name,value:this.state.name,onChange:function(t){return e.handleChange(t)}})),r.a.createElement(_.a,null,r.a.createElement(z.a,{type:"textarea",name:"about",placeholder:void 0===this.props.user.about?"Tell us more about you!":this.props.user.about,value:this.state.about,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement(Q.a,null,r.a.createElement(_.a,null,r.a.createElement(j.a,{className:"btn btn-primary",type:"submit"},r.a.createElement("i",{className:"fas fa-save"})))))))}}]),t}(n.Component),ie=a(43),le=a.n(ie),se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={modalOpen:!1},a.ApiService=new y,a.modalToggle=a.modalToggle.bind(Object(h.a)(Object(h.a)(a))),a.updateUser=a.updateUser.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"modalToggle",value:function(){this.setState(function(e){return{modalOpen:!e.modalOpen}})}},{key:"updateUser",value:function(e){var t=this;this.ApiService.updateUser(e).then(function(e){return t.props.handler(e)})}},{key:"updatePet",value:function(e,t){var a=this,n={};t.name&&(n.name=t.name),t.animal&&(n.animal=t.animal),t.description&&(n.description=t.description),t.image&&(n.image=t.image),this.ApiService.updatePet(e,n).then(function(e){return a.props.handleUpdate(e)})}},{key:"createPet",value:function(e){var t=this;this.ApiService.createPet(e).then(function(e){return t.props.handleUpdate(e)})}},{key:"deletePet",value:function(e){var t=this;this.ApiService.deletePet(e).then(function(e){return t.props.handleUpdate(e)})}},{key:"updateEvent",value:function(e,t){var a=this,n={};t.name&&(n.name=t.name),t.animal&&(n.animal=t.animal),t.description&&(n.description=t.description),t.image&&(n.image=t.image),this.ApiService.updateEvent(e,t).then(function(e){return a.props.handleUpdate(e)})}},{key:"createEvent",value:function(e){var t=this;this.ApiService.createEvent(e).then(function(e){return t.props.handleUpdate(e)})}},{key:"deleteEvent",value:function(e){var t=this;this.ApiService.deleteEvent(e).then(function(e){return t.props.handleUpdate(e)})}},{key:"render",value:function(){var e=this;return console.log(this.props.events),r.a.createElement("div",{className:"container mt-sm-4 mb-5"},r.a.createElement("div",{id:"test",className:"row"},r.a.createElement("div",{className:"col-lg-4 pb-md-1 pl-5 justify-content-md-center d-flex justify-content-center profile-container"},this.props.user.image?r.a.createElement(le.a,{className:"profile-pic",src:this.props.user.image,alt:"profile"}):r.a.createElement(le.a,{className:"profile-pic",src:"images/camera.png",alt:"profile"}),r.a.createElement("div",{className:"edit-profile-icon"},r.a.createElement(j.a,{className:"btn btn-primary",onClick:this.modalToggle},r.a.createElement("i",{className:"fas fa-pencil-alt"})),r.a.createElement(re,Object(R.a)({user:this.props.user,modalOpen:this.state.modalOpen,toggleModal:this.modalToggle,handler:function(t){return e.updateUser(t)}},"user",this.props.user))))),r.a.createElement("div",{id:"test",className:"col text-center"},r.a.createElement("h2",null,"Welcome - ",this.props.user.name,"!"),r.a.createElement("br",null)),r.a.createElement("div",{id:"test",className:"col text-center"},r.a.createElement("h3",null,r.a.createElement("strong",null,"About:")," ",this.props.user.about)),r.a.createElement("hr",{className:"bighr"}),r.a.createElement("div",null,r.a.createElement("h2",null,"Pets"),r.a.createElement("div",{className:"card-container"},null!==this.props.pets?this.props.pets.map(function(t,a){return r.a.createElement($,{key:a,pet:t,deletePet:function(t){return e.deletePet(t)},updatePet:function(t,a){return e.updatePet(t,a)}})}):r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("h3",null,"Add a Pet"),r.a.createElement(ae,{handler:function(t){return e.createPet(t)}})),r.a.createElement("hr",{className:"bighr"})),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h2",null,"Events"),r.a.createElement("div",{className:"card-container"},this.props.events?this.props.events.map(function(t,a){return r.a.createElement(te,{key:a,event:t,deleteEvent:function(t){return e.deleteEvent(t)},updateEvent:function(t,a){return e.updateEvent(t,a)}})}):r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("h3",null,"Add an Event"),r.a.createElement(ne,{handler:function(t){return e.createEvent(t)}}))))}}]),t}(n.Component),ce=a(25),oe=a.n(ce);oe.a.accessToken="pk.eyJ1IjoibmhpcnNjaGZlbGQiLCJhIjoiY2pzcHR1bXZ0MG9taDN5b2VteHVqNTRoYiJ9._5W0DOZMRMFN9ixppFaP1w";var ue=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).mapRef=r.a.createRef(),a.map=null,a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){1===this.props.locations.length&&(this.initMap(),this.addMarkers())}},{key:"componentDidUpdate",value:function(e){e.locations!=this.props.locations&&(this.props.locations.length>0||this.props.center)&&(this.initMap(),this.addMarkers())}},{key:"initMap",value:function(){this.map=new oe.a.Map({container:this.mapRef.current,style:"mapbox://styles/mapbox/streets-v10",center:this.props.locations[0],zoom:12}),this.map.addControl(new oe.a.NavigationControl)}},{key:"addMarkers",value:function(){var e=this;this.props.locations.forEach(function(t){return new oe.a.Marker({color:"green"}).setLngLat(t).addTo(e.map)})}},{key:"render",value:function(){return console.log("mapbox mounting, props are",this.props),r.a.createElement("div",{ref:this.mapRef,className:"map-box-search",style:{height:"300px",width:"600px"}})}}]),t}(n.Component),me=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,{className:"search-result-card"},r.a.createElement(S.a,{top:!0,width:"100%",src:this.props.event.image,alt:"Card image cap"}),r.a.createElement(w.a,null,r.a.createElement(C.a,null,this.props.event.name),r.a.createElement(x.a,null,this.props.event.description)))}}]),t}(n.Component),pe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={search:"",results:[],events:[]},a.ApiService=new y,a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){e!==this.props&&this.props.events.length>0&&this.setState({events:this.props.events})}},{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),void 0!=this.state.search.length&&this.state.search.length>2){var t=new RegExp(this.state.search),a=this.state.events.filter(function(e){return t.test(e.name)||t.test(e.desciption)||t.test(e.location)});a.length>0&&this.setState({results:a})}}},{key:"render",value:function(){var e=this;return r.a.createElement(T.a,null,r.a.createElement("div",{className:"search-wrapper d-flex flex-column"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"search-box d-flex flex-column justify-content-center"},r.a.createElement(W.a,{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(_.a,null,r.a.createElement(J.a,null,r.a.createElement(B.a,{addonType:"prepend"},r.a.createElement("div",{className:"prepend-box"},r.a.createElement("i",{className:"fas fa-search fa-2x"}))),r.a.createElement(z.a,{value:this.state.search,onChange:function(t){return e.handleChange(t)},type:"text",name:"search",placeholder:"Search events near you"}))))),r.a.createElement(ue,{locations:this.state.events.map(function(e){return e.location.coordinates})})),r.a.createElement("div",null,r.a.createElement("hr",null)),r.a.createElement("div",{className:"search-results d-flex"},this.state.results.length>0?this.state.results.map(function(t,a){return r.a.createElement(j.a,{className:"search-result-button",onClick:function(){return e.props.history.push("/event/".concat(t._id))}},r.a.createElement(me,{key:a,event:t}))}):this.state.events.map(function(t,a){return r.a.createElement(j.a,{className:"search-result-button",onClick:function(){return e.props.history.push("/event/".concat(t._id))}},r.a.createElement(me,{key:a,event:t}))}))))}}]),t}(n.Component),he=a(184),de=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"d-flex justify-content-between"},r.a.createElement(he.a,{style:{textDecoration:"none"},to:"/",exact:!0,className:"navbar-link align-self-start"},r.a.createElement("span",{id:"logo"},"WePet"),r.a.createElement("i",{className:"fas fa-paw"})),r.a.createElement("div",{className:"align-self-end d-flex justify-content-around"},r.a.createElement(he.a,{to:"/search",exact:!0,className:"navbar-link"},r.a.createElement("i",{className:"fas fa-search"})),this.props.user?r.a.createElement(he.a,{to:"/profile",exact:!0,className:"navbar-link"},r.a.createElement("i",{className:"fas fa-user"})):r.a.createElement("div",null),this.props.user?r.a.createElement(he.a,{to:"/logout",exact:!0,className:"navbar-link"},r.a.createElement("i",{className:"fas fa-sign-out-alt"})):r.a.createElement("div",null)))}}]),t}(n.Component),ve=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={attending:!1},a.ApiService=new y,a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getParticipants()}},{key:"getParticipants",value:function(){var e=this;this.ApiService.getParticipants(this.props.match.params.id).then(function(t){console.log(t);var a=!!t.participants.includes(t.currentUser);e.setState({participants:t.participants,owner:t.owner,ownerCurrent:t.ownerCurrent,attending:a})})}},{key:"addParticipant",value:function(){var e=this;this.ApiService.addParticipant(this.props.match.params.id).then(function(t){return e.props.handleUpdate(t)}),this.setState({attending:!0})}},{key:"removeParticipant",value:function(){var e=this;this.ApiService.removeParticipant(this.props.match.params.id).then(function(t){return e.props.handleUpdate(t)}),this.setState({attending:!1})}},{key:"render",value:function(){var e=this;return console.log(this.state),this.props.event?(console.log(this.state),r.a.createElement(T.a,null,r.a.createElement("div",null,r.a.createElement(j.a,{className:"btn btn-primary",onClick:function(){return e.props.history.push("/search")}},r.a.createElement("i",{className:"fas fa-arrow-left"})," Back"),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"event-header"},r.a.createElement("h1",null,this.props.event.name),r.a.createElement("hr",null),r.a.createElement("img",{src:this.props.event.image,alt:"an event picture"})),r.a.createElement(ue,{locations:[this.props.event.location.coordinates]})),r.a.createElement("div",{className:"event-details"},r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex justify-content-between"},this.state.ownerCurrent?r.a.createElement("div",null):this.state.attending?r.a.createElement(j.a,{onClick:function(){return e.removeParticipant()}},"Unattend"):r.a.createElement(j.a,{onClick:function(){return e.addParticipant()}},"Attend"),r.a.createElement("h5",null,"Address: ",this.props.event.location.address)),r.a.createElement("p",null,this.props.event.description),r.a.createElement("h2",null,"owner"),r.a.createElement("img",{src:this.state.owner&&this.state.owner.image,alt:"owner photo"}),r.a.createElement("br",null),r.a.createElement("span",null,this.state.owner&&this.state.owner.name),r.a.createElement("h2",null,"participants"),this.state.participants&&this.state.participants.map(function(e){return r.a.createElement("div",{className:"participant-wrapper"},r.a.createElement("img",{src:e.image,alt:"participant photo"}),r.a.createElement("br",null),r.a.createElement("span",null,e.name))}))))):r.a.createElement("div",null,"loading")}}]),t}(n.Component),fe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={user:null,pets:null,events:[],allevents:[]},a.AuthService=new k,a.StorageService=new O,a.ApiService=new y,a.handleLogout=a.handleLogout.bind(Object(h.a)(Object(h.a)(a))),a.handleConfirm=a.handleConfirm.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;if(null===t.user||null===this.state.user||t.user===this.state.user&&t.pets===this.state.pets){if(null!==t.user&&null===this.state.user){var n=this.StorageService.get("user");null!==n&&this.AuthService.verify().then(function(e){200===e.status?a.setState({user:n}):a.StorageService.remove("user")})}}else this.StorageService.set("user",this.state.user)}},{key:"componentDidMount",value:function(){var e=this,t=this.StorageService.get("user");null!==t&&this.AuthService.verify().then(function(a){200===a.status?(e.setState({user:t}),e.getUserData()):e.StorageService.remove("user")})}},{key:"getUserData",value:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.ApiService.getPets().then(function(t){e.ApiService.getEvents().then(function(a){e.setState({pets:t,events:a.filter(function(t){return t.owner===e.state.user._id}),allevents:a})})})}},{key:"handleLogin",value:function(e){var t=e.data?e.data:e;this.StorageService.set("user",t),this.setState({user:t}),this.getUserData()}},{key:"handleLogout",value:function(){this.setState({user:null}),this.StorageService.remove("user")}},{key:"handleConfirm",value:function(e){var t=this;this.AuthService.confirmEmail(e).then(function(e){return t.setState({user:e})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(de,{user:this.state.user}),r.a.createElement(d.a,null,r.a.createElement(v.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(P,Object.assign({},t,{user:e.state.user}))}}),r.a.createElement(v.a,{path:"/profile",render:function(t){return null!==e.state.user?r.a.createElement(se,Object.assign({},t,{user:e.state.user,pets:e.state.pets,events:e.state.events,handler:function(t){return e.handleLogin(t)},handleUpdate:function(t){return e.getUserData(t)}})):r.a.createElement(f.a,{to:"/"})}}),r.a.createElement(v.a,{path:"/loginSignup",render:function(t){return null===e.state.user?r.a.createElement(G,Object.assign({},t,{handler:function(t){return e.handleLogin(t)}})):r.a.createElement(f.a,{to:"/"})}}),r.a.createElement(v.a,{path:"/confirm/:confirmationToken",render:function(t){return e.handleConfirm(t.match.params.confirmationToken),r.a.createElement(f.a,{to:"/"})}}),r.a.createElement(v.a,{path:"/logout",render:function(){return e.handleLogout(),r.a.createElement(f.a,{to:"/"})}}),r.a.createElement(v.a,{path:"/search",render:function(t){return r.a.createElement(pe,Object.assign({},t,{events:e.state.allevents}))}}),r.a.createElement(v.a,{exact:!0,path:"/event/:id",render:function(t){return r.a.createElement(ve,Object.assign({},t,{event:e.state.allevents.filter(function(e){return e._id===t.match.params.id})[0],handleUpdate:function(t){return e.getUserData(t)}}))}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(s.a,null,r.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},24:function(e,t,a){},73:function(e,t,a){e.exports=a(166)}},[[73,1,2]]]);
//# sourceMappingURL=main.a43b303f.chunk.js.map